<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"> 

<h:head>
	<meta content="text/html" ></meta>
	<title>Contactos</title>
</h:head> 
<body> 
	<h1>Agenda de contactos</h1>
	<h2>Lista de contactos</h2>
	<h:panelGroup id="panelLista" rendered="#{agendaBean.renderLista}">
		<table>
			 <tr>
				<th>ID</th>
				<th>Nombre</th>
				<th>Apellidos</th>
				<th>Alias</th>
				<th>E-Mail</th>
				<th>Telefono</th>
			</tr>
			<ui:repeat var="c" value="#{agendaBean.contactos}">
				<tr>
					<td>#{c.idCONTACTOS}</td>
					<td>#{c.nombre}</td>
					<td>#{c.apellidos}</td>
					<td>#{c.alias}</td>
					<td>#{c.email}</td>
					<td>#{c.telefono}</td>
					<td>
						<h:form><h:commandButton action="#{agendaBean.bajaContacto(c)}" value="Eliminar" /></h:form>
					</td>
				</tr>
			</ui:repeat>
		</table>
	</h:panelGroup>
	<h:form><h:commandButton action="#{agendaBean.setRenderTrue()}" value="Mostrar lista de contactos" /></h:form>
	<h2>Dar de alta un contacto</h2>
	<h:form>
		<table>
			<tr>
				<th>Nombre</th>
				<th>Apellidos</th>
				<th>Alias</th>
				<th>Email</th>
				<th>Telefono</th>
			</tr>
			<tr>
				<td><h:inputText id="nombre" value="#{contactBean.entity.nombre}" required="true" requiredMessage="Â¡ERROR! Tiene que introducir un nombre para el contacto." /></td>
				<h:message for="nombre" style="color:red"/>
				<td><h:inputText value="#{contactBean.entity.apellidos}" /></td>
				<td><h:inputText value="#{contactBean.entity.alias}" /></td>
				<td><h:inputText value="#{contactBean.entity.email}" /></td>
				<td><h:inputText value="#{contactBean.entity.telefono}" /></td>
			</tr>
			<tr>
				<td><h:commandButton action="#{agendaBean.altaContacto(contactBean.entity)}" value="Dar de alta" /></td>
			</tr>
		</table>
		<table>
			<tr>
				<td style="color:red"><h:panelGroup id="mensajeAlta" rendered="#{agendaBean.renderMensajeAlta}">#{agendaBean.error}</h:panelGroup></td>
			</tr>
		</table>
	</h:form>
		<h2>Buscar un contacto</h2>
	<h:form>
		<table>
			<tr>
				<th>Nombre</th>
			</tr>
			<tr>
				<td><h:inputText value="#{agendaBean.buscar}" /></td>
			</tr>
			<tr>
				<td><h:commandButton action="#{agendaBean.buscarContacto(agendaBean.buscar)}" value="Buscar" /></td>
			</tr>
			<tr>
				<td>
					<h:panelGroup id="mensajeBuscar" rendered="#{agendaBean.renderMensajeBuscar}">
						<h:outputText value="#{agendaBean.buscarError}" style="color:red" />
					</h:panelGroup>
				</td>
				<h:panelGroup id="panelBuscar" rendered="#{agendaBean.renderBuscar}">
					<table>
						<tr>
							<th>ID</th>
							<th>Nombre</th>
							<th>Apellidos</th>
							<th>Alias</th>
							<th>E-Mail</th>
							<th>Telefono</th>
						</tr>
						<tr>
							<td>#{agendaBean.buscado.idCONTACTOS}</td>
							<td>#{agendaBean.buscado.nombre}</td>
							<td>#{agendaBean.buscado.apellidos}</td>
							<td>#{agendaBean.buscado.alias}</td>
							<td>#{agendaBean.buscado.email}</td>
							<td>#{agendaBean.buscado.telefono}</td>
						</tr>
					</table>
				</h:panelGroup>
			</tr>
		</table>
	</h:form>
</body> 
</html>
